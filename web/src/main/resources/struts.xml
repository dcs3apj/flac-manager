<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<include file="struts-default.xml" />

	<package name="default" extends="struts-default" namespace="/">
		
		<interceptors>
			<interceptor
				name="prepareAfter"
				class="uk.co.unclealex.music.web.interceptor.PrepareAfterInterceptor"/>			

            <interceptor-stack name="myStack">
                <interceptor-ref name="exception"/>
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="debugging"/>
                <interceptor-ref name="profiling"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
            </interceptor-stack>
		</interceptors>
		
		<default-interceptor-ref name="myStack"/>

		<action name="index"
			class="uk.co.unclealex.music.web.actions.BaseAction">
			<result name="success" type="redirect">/html/missing.html</result>
		</action>

	</package>
	
	<package name="html" extends="default" namespace="/html">
			
		<action name="missing"
			class="uk.co.unclealex.music.web.actions.MissingCoversAction">
			<result name="success">/WEB-INF/pages/albums.jsp</result>
		</action>

		<action name="artists"
			class="uk.co.unclealex.music.web.actions.ArtistsAction">
			<result name="success">/WEB-INF/pages/artists.jsp</result>
		</action>

		<action name="albumsforartist"
			class="uk.co.unclealex.music.web.actions.AlbumsForArtistAction">
			<result name="success">/WEB-INF/pages/albums.jsp</result>
		</action>

		<action name="album"
			class="uk.co.unclealex.music.web.actions.AlbumAction">
			<result name="success">/WEB-INF/pages/album.jsp</result>
			<result name="input">/WEB-INF/pages/album.jsp</result>
		</action>
		
		<action name="select"
			class="uk.co.unclealex.music.web.actions.SelectAlbumCoverAction">
			<result name="success" type="redirect">/html/album.html?flacAlbumBean=${flacAlbumBean.id}</result>
			<result name="input">/WEB-INF/pages/album.jsp</result>
		</action>

		<action name="download"
			class="uk.co.unclealex.music.web.actions.DownloadAlbumCoverAction">
			<result name="success" type="redirect">/html/album.html?flacAlbumBean=${flacAlbumBean.id}</result>
			<result name="input">/WEB-INF/pages/album.jsp</result>
		</action>

		<action name="upload"
			class="uk.co.unclealex.music.web.actions.UploadAlbumCoverAction">
			<result name="success" type="redirect">/html/album.html?flacAlbumBean=${flacAlbumBean.id}</result>
			<result name="input">/WEB-INF/pages/album.jsp</result>
		</action>

	</package>	
</struts>