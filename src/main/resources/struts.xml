<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<include file="struts-default.xml" />

	<package name="default" extends="struts-default">

		<action name="index"
			class="com.opensymphony.xwork2.ActionSupport">
			<result name="success">/WEB-INF/pages/index.jsp</result>
		</action>

		<action name="devices"
			class="uk.co.unclealex.flacconverter.actions.ConnectedDevicesAction">
			<result name="success">/WEB-INF/pages/connected-devices.jsp</result>
		</action>

		<action name="device-download"
			class="uk.co.unclealex.flacconverter.actions.PrepareDeviceDownloadAction">
			<result name="success" type="chain">monitor-device-downloading</result>
			<result name="error">/WEB-INF/pages/device-errored.jsp</result>
			<result name="requirespassword">/WEB-INF/pages/device-password.jsp</result>
			<result name="alreadywriting">/WEB-INF/pages/device-used.jsp</result>
		</action>

		<action name="device-downloading"
			class="uk.co.unclealex.flacconverter.actions.ExecuteDeviceDownloadAction"/>
			
		<action name="monitor-device-downloading"
			class="uk.co.unclealex.flacconverter.actions.MonitorDeviceDownloadAction">
			<interceptor-ref name="defaultStack" />
			<interceptor-ref name="execAndWait" />
			<result name="success">/WEB-INF/pages/device-finished.jsp</result>
			<result name="error">/WEB-INF/pages/device-errored.jsp</result>
			<result name="wait">/WEB-INF/pages/device-progress.jsp</result>
		</action>
	</package>
</struts>